<!DOCTYPE html><html lang="en"><head><title>index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="index"><meta name="groc-project-path" content="README.md"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">README.md</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="puffer">puffer</h1>
<p><a href="https://travis-ci.org/tectual/puffer"><img src="https://travis-ci.org/tectual/puffer.svg" alt="Build Status"></a>
<a href="http://badge.fury.io/js/puffer"><img src="https://badge.fury.io/js/puffer.svg" alt="npm version"></a></p>
<p><a href="https://www.npmjs.com/package/puffer">Puffer</a> is an extendable Couchbase ODM for Hapi js. It uses <a href="https://www.npmjs.com/package/boom">Boom</a> to return nicer DB errors and use <a href="https://www.npmjs.com/package/q">Q</a> to provide promises. </p>
<p>Full documation can be found <a href="http://tectual.github.io/puffer/">here</a>.</p>
<h2 id="how-to-use">How to use</h2>
<p>You can initialize it in your server and use it in your other files or even other plugins.</p>
<h3 id="single-module-with-many-files">Single module with many files</h3>
<p>In your server.coffee have something like this:</p>
<pre><code>Hapi = require &#39;hapi&#39;
new require(&#39;puffer&#39;)( { host: &#39;127.0.0.1&#39;, name: &#39;default&#39; } )</code></pre>
<p>Above line will create an instance of couchbase which you can use in your other files as an example in your userModel.coffee you can use this:</p>
<pre><code>bucket = require(&#39;puffer&#39;).instance
bucket.create( &#39;doc1&#39;, { color: &#39;red&#39; } )
      .then( (d) -&gt; console.log d )</code></pre>
<h3 id="multiple-hapi-plugins">Multiple Hapi Plugins</h3>
<p>In your server.coffee have something like this:</p>
<pre><code>Hapi = require &#39;hapi&#39;
db = new require(&#39;puffer&#39;)( { host: &#39;127.0.0.1&#39;, name: &#39;default&#39; } )

server.register { 
  register: require(&#39;myPlugin&#39;), 
  options: { bucket: db } 
}, (err) -&gt;
  throw err if err
  server.start()</code></pre>
<p>Above line will create an instance of couchbase which you should pass to plugins. In your myPlugin module you can do this:</p>
<pre><code>exports.register = (plugin, options, next) -&gt;
  bucket = options.bucket
  bucket.create( &#39;doc1&#39;, { color: &#39;red&#39; } )
        .then( (d) -&gt; console.log d )</code></pre>
<h3 id="need-more">Need More?</h3>
<ul>
<li>Find the full list of available methods <a href="main.html">here</a>.</li>
<li>This documentation is generated by <code>groc</code>, you can make a copy of in your local version.</li>
<li>You can run tests locally by <code>npm test</code>. Make sure you have development dependencies installed.</li>
</ul></div></div></div></div></body></html>